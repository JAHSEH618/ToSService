# TOS ä¸Šä¼ æœåŠ¡å®¹å™¨åŒ–æŠ€æœ¯æ–¹æ¡ˆ

> **ç‰ˆæœ¬**: v1.0  
> **æ—¥æœŸ**: 2026-02-09  
> **ä½œè€…**: AI Photo Studio Team

---

## ç›®å½•

1. [èƒŒæ™¯ä¸ç›®æ ‡](#1-èƒŒæ™¯ä¸ç›®æ ‡)
2. [ç°æœ‰æ¶æ„åˆ†æ](#2-ç°æœ‰æ¶æ„åˆ†æ)
3. [å®¹å™¨åŒ–æ–¹æ¡ˆè®¾è®¡](#3-å®¹å™¨åŒ–æ–¹æ¡ˆè®¾è®¡)
4. [API æ¥å£è§„èŒƒ](#4-api-æ¥å£è§„èŒƒ)
5. [æ•°æ®æ¨¡å‹å®šä¹‰](#5-æ•°æ®æ¨¡å‹å®šä¹‰)
6. [éƒ¨ç½²æ–¹æ¡ˆ](#6-éƒ¨ç½²æ–¹æ¡ˆ)
7. [å®¢æˆ·ç«¯é›†æˆæŒ‡å—](#7-å®¢æˆ·ç«¯é›†æˆæŒ‡å—)
8. [æ€§èƒ½å½±å“åˆ†æ](#8-æ€§èƒ½å½±å“åˆ†æ)
9. [å®‰å…¨æ€§è€ƒè™‘](#9-å®‰å…¨æ€§è€ƒè™‘)
10. [é£é™©ä¸åº”å¯¹](#10-é£é™©ä¸åº”å¯¹)

---

## 1. èƒŒæ™¯ä¸ç›®æ ‡

### 1.1 èƒŒæ™¯

å½“å‰ AI Photo Studio åº”ç”¨ä¸­ï¼ŒTOSï¼ˆç«å±±å¼•æ“å¯¹è±¡å­˜å‚¨ï¼‰ä¸Šä¼ åŠŸèƒ½ç›´æ¥é›†æˆåœ¨ Android å®¢æˆ·ç«¯ä¸­ï¼š

- **ä»£ç ä½ç½®**: `TosUploadService.java`
- **é…ç½®ç®¡ç†**: `TosConfig.java` + `assets/tos_secrets.properties`
- **ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·ç‚¹å‡»ã€Œåˆ†äº«ã€æŒ‰é’®æ—¶ï¼Œå°†ç”Ÿæˆçš„ AI ç…§ç‰‡ä¸Šä¼ è‡³ TOSï¼Œè·å–å…¬ç½‘ URL åç”ŸæˆäºŒç»´ç 

### 1.2 ç›®æ ‡

å°† TOS ä¸Šä¼ èƒ½åŠ›æŠ½å–ä¸º**ç‹¬ç«‹çš„å®¹å™¨åŒ–å¾®æœåŠ¡**ï¼Œå®ç°ï¼š

| ç›®æ ‡ | æè¿° |
|------|------|
| **è§£è€¦** | TOS ä¸Šä¼ é€»è¾‘ä¸å®¢æˆ·ç«¯åˆ†ç¦»ï¼Œä¾¿äºç‹¬ç«‹è¿­ä»£ |
| **å®‰å…¨** | AK/SK å‡­è¯ä¸å†æš´éœ²åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ |
| **å¤ç”¨** | æ”¯æŒ Androidã€iOSã€Web ç­‰å¤šç«¯è°ƒç”¨ |
| **æ‰©å±•** | ä¾¿äºæ·»åŠ å›¾ç‰‡å¤„ç†ï¼ˆå‹ç¼©ã€æ°´å°ã€å®¡è®¡ï¼‰ç­‰èƒ½åŠ› |
| **è¿ç»´** | æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²ã€å¼¹æ€§æ‰©ç¼©å®¹ |

### 1.3 èŒƒå›´

æœ¬æ–¹æ¡ˆä»…æ¶‰åŠ **TOS ä¸Šä¼ èƒ½åŠ›** çš„å®¹å™¨åŒ–ï¼Œä¸åŒ…æ‹¬ï¼š
- AI å›¾ç‰‡ç”ŸæˆæœåŠ¡ï¼ˆå·²ç‹¬ç«‹éƒ¨ç½²åœ¨ `101.47.158.162:8000`ï¼‰
- æ”¯ä»˜ã€è®¢å•ç­‰ä¸šåŠ¡é€»è¾‘

---

## 2. ç°æœ‰æ¶æ„åˆ†æ

### 2.1 å½“å‰ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            Android App                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ‹ç…§/ä¸Šä¼    â”‚â”€â”€â”€â–¶â”‚ AI ç”ŸæˆæœåŠ¡è°ƒç”¨  â”‚â”€â”€â”€â–¶â”‚ å±•ç¤ºç”Ÿæˆå›¾ç‰‡            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ (Banana Service) â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚                 â”‚
â”‚                                                         â–¼                 â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                     â”‚ ç”¨æˆ·ç‚¹å‡»ã€Œåˆ†äº«ã€                                  â”‚  â”‚
â”‚                     â”‚   â””â”€â–¶ TosUploadService.uploadImage()            â”‚  â”‚
â”‚                     â”‚       â””â”€â–¶ ç›´æ¥è°ƒç”¨ TOS SDK ä¸Šä¼                   â”‚  â”‚
â”‚                     â”‚           â””â”€â–¶ è¿”å›å…¬ç½‘ URL                       â”‚  â”‚
â”‚                     â”‚               â””â”€â–¶ ç”ŸæˆäºŒç»´ç å±•ç¤º                 â”‚  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ (ç›´æ¥è°ƒç”¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç«å±±å¼•æ“ TOS å¯¹è±¡å­˜å‚¨                               â”‚
â”‚  Bucket: aipohto-lky                                                    â”‚
â”‚  Region: ap-southeast-1 (æ–°åŠ å¡)                                        â”‚
â”‚  Endpoint: tos-ap-southeast-1.volces.com                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç°æœ‰ä»£ç ç»“æ„

```
app/src/main/java/com/gy/photostudio/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ TosConfig.java          # TOS é…ç½®ï¼ˆRegionã€Endpointã€Bucketï¼‰
â”œâ”€â”€ service/
â”‚   â””â”€â”€ TosUploadService.java   # TOS ä¸Šä¼ æœåŠ¡ï¼ˆSDK å°è£…ï¼‰
â””â”€â”€ widget/
    â””â”€â”€ PaidImageDialog.java    # è°ƒç”¨ä¸Šä¼ æœåŠ¡çš„ UI ç»„ä»¶

app/src/main/assets/
â””â”€â”€ tos_secrets.properties      # AK/SK æ•æ„Ÿå‡­è¯ï¼ˆä¸æäº¤ Gitï¼‰
```

### 2.3 ç°æœ‰ä¸Šä¼ æµç¨‹

```java
// TosUploadService.java æ ¸å¿ƒæµç¨‹
public static void uploadImage(Bitmap bitmap, UploadCallback callback) {
    executor.execute(() -> {
        // 1. Bitmap è½¬ byte[]
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 90, baos);
        byte[] imageBytes = baos.toByteArray();
        
        // 2. ç”Ÿæˆå”¯ä¸€ Object Key
        String objectKey = "generated/" + UUID.randomUUID() + "_" + timestamp + ".jpg";
        
        // 3. è°ƒç”¨ TOS SDK ä¸Šä¼ 
        PutObjectOutput output = getTosClient().putObject(input);
        
        // 4. æ„å»ºå…¬ç½‘ URL å¹¶å›è°ƒ
        String publicUrl = "https://" + PUBLIC_DOMAIN + "/" + objectKey;
        callback.onSuccess(publicUrl, output.getEtag());
    });
}
```

### 2.4 ç°æœ‰é—®é¢˜

| é—®é¢˜ | å½±å“ | ä¼˜å…ˆçº§ |
|------|------|--------|
| AK/SK å­˜å‚¨åœ¨å®¢æˆ·ç«¯ | å­˜åœ¨å‡­è¯æ³„éœ²é£é™© | ğŸ”´ é«˜ |
| æ— æ³•å¤šç«¯å¤ç”¨ | Web/iOS éœ€é‡å¤å®ç° | ğŸŸ¡ ä¸­ |
| å®¢æˆ·ç«¯ä¾èµ– TOS SDK | APK ä½“ç§¯å¢åŠ  (~2MB) | ğŸŸ¢ ä½ |
| æ— æ³•ç»Ÿä¸€å®¡è®¡æ—¥å¿— | éš¾ä»¥è¿½è¸ªä¸Šä¼ è¡Œä¸º | ğŸŸ¡ ä¸­ |

---

## 3. å®¹å™¨åŒ–æ–¹æ¡ˆè®¾è®¡

### 3.1 ç›®æ ‡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            å®¢æˆ·ç«¯ (Android/iOS/Web)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ‹ç…§/ä¸Šä¼    â”‚â”€â”€â”€â–¶â”‚ AI ç”ŸæˆæœåŠ¡è°ƒç”¨  â”‚â”€â”€â”€â–¶â”‚ å±•ç¤ºç”Ÿæˆå›¾ç‰‡            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚                 â”‚
â”‚                                                        â–¼                 â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                     â”‚ ç”¨æˆ·ç‚¹å‡»ã€Œåˆ†äº«ã€                                  â”‚  â”‚
â”‚                     â”‚   â””â”€â–¶ HTTP POST /api/v1/upload/base64           â”‚  â”‚
â”‚                     â”‚       â””â”€â–¶ æ¥æ”¶å…¬ç½‘ URL                           â”‚  â”‚
â”‚                     â”‚           â””â”€â–¶ ç”ŸæˆäºŒç»´ç å±•ç¤º                     â”‚  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ HTTP Request
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TOS Upload Service (FastAPI Container)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  /api/v1/upload/base64   â”€â”€â”€ æ¥æ”¶ Base64 å›¾ç‰‡                     â”‚   â”‚
â”‚  â”‚  /api/v1/upload/image    â”€â”€â”€ æ¥æ”¶ Multipart æ–‡ä»¶                  â”‚   â”‚
â”‚  â”‚  /api/v1/health          â”€â”€â”€ å¥åº·æ£€æŸ¥                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                     â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                      â”‚      TOS Python SDK       â”‚                      â”‚
â”‚                      â”‚   (volcengine-python-sdk) â”‚                      â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ TOS API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç«å±±å¼•æ“ TOS å¯¹è±¡å­˜å‚¨                               â”‚
â”‚  Bucket: aipohto-lky                                                    â”‚
â”‚  Region: ap-southeast-1                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æŠ€æœ¯é€‰å‹

| ç»„ä»¶ | é€‰å‹ | ç†ç”± |
|------|------|------|
| **Web æ¡†æ¶** | FastAPI | é«˜æ€§èƒ½ã€è‡ªåŠ¨ç”Ÿæˆ OpenAPI æ–‡æ¡£ã€Python ç”Ÿæ€ |
| **ASGI æœåŠ¡å™¨** | Uvicorn | ç”Ÿäº§çº§å¼‚æ­¥æœåŠ¡å™¨ |
| **TOS SDK** | tos (å®˜æ–¹ Python SDK) | ç«å±±å¼•æ“å®˜æ–¹ç»´æŠ¤ |
| **å®¹å™¨è¿è¡Œæ—¶** | Docker | æ ‡å‡†åŒ–éƒ¨ç½² |
| **ç¼–æ’å·¥å…·** | Docker Compose | ç®€åŒ–å¤šæœåŠ¡éƒ¨ç½² |

### 3.3 é¡¹ç›®ç»“æ„

```
tos-upload-service/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†ï¼ˆç¯å¢ƒå˜é‡è¯»å–ï¼‰
â”‚   â”œâ”€â”€ models.py               # Pydantic è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”œâ”€â”€ tos_client.py           # TOS SDK å°è£…
â”‚   â”œâ”€â”€ dependencies.py         # FastAPI ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ exceptions.py           # è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†
â”‚   â””â”€â”€ routers/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ upload.py           # ä¸Šä¼ ç›¸å…³è·¯ç”±
â”‚       â””â”€â”€ health.py           # å¥åº·æ£€æŸ¥è·¯ç”±
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_upload.py          # ä¸Šä¼ æ¥å£æµ‹è¯•
â”‚   â””â”€â”€ conftest.py             # pytest é…ç½®
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                  # å®¹å™¨æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml          # æœ¬åœ°å¼€å‘/éƒ¨ç½²ç¼–æ’
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

---

## 4. API æ¥å£è§„èŒƒ

### 4.1 æ¥å£æ€»è§ˆ

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| POST | `/api/v1/upload/image` | ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ (Multipart) | API Key |
| POST | `/api/v1/upload/base64` | ä¸Šä¼  Base64 ç¼–ç å›¾ç‰‡ | API Key |
| GET | `/api/v1/health` | å¥åº·æ£€æŸ¥ | æ—  |

### 4.2 è®¤è¯æ–¹å¼

æ‰€æœ‰ä¸Šä¼ æ¥å£éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ API Keyï¼š

```http
X-API-Key: <your-api-key>
```

### 4.3 POST /api/v1/upload/image

ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼ˆé€‚ç”¨äº Web ç«¯è¡¨å•ä¸Šä¼ ï¼‰ã€‚

#### è¯·æ±‚

**Content-Type**: `multipart/form-data`

| å­—æ®µ | ç±»å‹ | å¿…å¡« | æè¿° |
|------|------|------|------|
| `file` | File | âœ… | å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒ JPEG/PNG/WEBPï¼Œæœ€å¤§ 10MB |
| `prefix` | String | âŒ | å­˜å‚¨è·¯å¾„å‰ç¼€ï¼Œé»˜è®¤ `generated/` |
| `quality` | Integer | âŒ | JPEG å‹ç¼©è´¨é‡ (1-100)ï¼Œé»˜è®¤ 90 |

#### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST "http://localhost:8001/api/v1/upload/image" \
  -H "X-API-Key: your-api-key" \
  -F "file=@photo.jpg" \
  -F "prefix=user_uploads/" \
  -F "quality=85"
```

#### å“åº”

**æˆåŠŸ (200 OK)**:

```json
{
  "success": true,
  "code": 0,
  "message": "Upload successful",
  "data": {
    "public_url": "https://aipohto-lky.tos-ap-southeast-1.volces.com/user_uploads/a1b2c3d4e5f6.jpg",
    "object_key": "user_uploads/a1b2c3d4e5f6.jpg",
    "etag": "\"d41d8cd98f00b204e9800998ecf8427e\"",
    "size_bytes": 245678,
    "content_type": "image/jpeg",
    "upload_time": "2026-02-09T11:30:00.000Z"
  }
}
```

**å¤±è´¥ (4xx/5xx)**:

```json
{
  "success": false,
  "code": 40001,
  "message": "Invalid file format. Supported: JPEG, PNG, WEBP",
  "data": null
}
```

---

### 4.4 POST /api/v1/upload/base64

ä¸Šä¼  Base64 ç¼–ç çš„å›¾ç‰‡ï¼ˆé€‚ç”¨äºç§»åŠ¨ç«¯ï¼Œä¸ç°æœ‰ Android å®¢æˆ·ç«¯å…¼å®¹ï¼‰ã€‚

#### è¯·æ±‚

**Content-Type**: `application/json`

```json
{
  "image_base64": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",
  "format": "jpeg",
  "prefix": "generated/",
  "quality": 90
}
```

| å­—æ®µ | ç±»å‹ | å¿…å¡« | æè¿° |
|------|------|------|------|
| `image_base64` | String | âœ… | Base64 ç¼–ç çš„å›¾ç‰‡æ•°æ®ï¼ˆä¸å« `data:image/...;base64,` å‰ç¼€ï¼‰ |
| `format` | String | âŒ | å›¾ç‰‡æ ¼å¼ï¼š`jpeg`/`png`/`webp`ï¼Œé»˜è®¤ `jpeg` |
| `prefix` | String | âŒ | å­˜å‚¨è·¯å¾„å‰ç¼€ï¼Œé»˜è®¤ `generated/` |
| `quality` | Integer | âŒ | JPEG å‹ç¼©è´¨é‡ (1-100)ï¼Œé»˜è®¤ 90 |

#### è¯·æ±‚ç¤ºä¾‹

```bash
curl -X POST "http://localhost:8001/api/v1/upload/base64" \
  -H "X-API-Key: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "image_base64": "iVBORw0KGgo...",
    "format": "jpeg",
    "prefix": "generated/"
  }'
```

#### å“åº”

åŒ `/api/v1/upload/image` æ¥å£ã€‚

---

### 4.5 GET /api/v1/health

å¥åº·æ£€æŸ¥æ¥å£ï¼Œç”¨äºå®¹å™¨ç¼–æ’å’Œè´Ÿè½½å‡è¡¡æ¢æ´»ã€‚

#### è¯·æ±‚

æ— å‚æ•°ã€‚

#### å“åº”

```json
{
  "status": "healthy",
  "service": "tos-upload-service",
  "version": "1.0.0",
  "tos_connection": "ok",
  "timestamp": "2026-02-09T11:30:00.000Z"
}
```

---

### 4.6 é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | HTTP çŠ¶æ€ | æè¿° |
|--------|-----------|------|
| 0 | 200 | æˆåŠŸ |
| 40001 | 400 | æ— æ•ˆçš„æ–‡ä»¶æ ¼å¼ |
| 40002 | 400 | æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶ |
| 40003 | 400 | Base64 è§£ç å¤±è´¥ |
| 40101 | 401 | ç¼ºå°‘ API Key |
| 40102 | 401 | æ— æ•ˆçš„ API Key |
| 50001 | 500 | TOS ä¸Šä¼ å¤±è´¥ |
| 50002 | 500 | æœåŠ¡å†…éƒ¨é”™è¯¯ |

---

## 5. æ•°æ®æ¨¡å‹å®šä¹‰

### 5.1 è¯·æ±‚æ¨¡å‹

```python
# Base64 ä¸Šä¼ è¯·æ±‚
class Base64UploadRequest(BaseModel):
    image_base64: str           # Base64 ç¼–ç çš„å›¾ç‰‡
    format: str = "jpeg"        # å›¾ç‰‡æ ¼å¼
    prefix: str = "generated/"  # å­˜å‚¨è·¯å¾„å‰ç¼€
    quality: int = 90           # å‹ç¼©è´¨é‡
    
    class Config:
        json_schema_extra = {
            "example": {
                "image_base64": "iVBORw0KGgo...",
                "format": "jpeg",
                "prefix": "generated/",
                "quality": 90
            }
        }
```

### 5.2 å“åº”æ¨¡å‹

```python
# ä¸Šä¼ ç»“æœ
class UploadResult(BaseModel):
    public_url: str             # å…¬ç½‘è®¿é—® URL
    object_key: str             # TOS å¯¹è±¡é”®
    etag: str                   # ETag æ ¡éªŒå€¼
    size_bytes: int             # æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
    content_type: str           # MIME ç±»å‹
    upload_time: datetime       # ä¸Šä¼ æ—¶é—´

# ç»Ÿä¸€å“åº”æ ¼å¼
class ApiResponse(BaseModel, Generic[T]):
    success: bool               # æ˜¯å¦æˆåŠŸ
    code: int                   # ä¸šåŠ¡ç 
    message: str                # æ¶ˆæ¯
    data: Optional[T] = None    # å“åº”æ•°æ®
```

---

## 6. éƒ¨ç½²æ–¹æ¡ˆ

### 6.1 ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶
# TOS é…ç½®
TOS_REGION=ap-southeast-1
TOS_ENDPOINT=tos-ap-southeast-1.volces.com
TOS_BUCKET_NAME=aipohto-lky
TOS_ACCESS_KEY=<your-access-key>
TOS_SECRET_KEY=<your-secret-key>
TOS_PUBLIC_DOMAIN=aipohto-lky.tos-ap-southeast-1.volces.com

# æœåŠ¡é…ç½®
SERVICE_PORT=8001
API_KEY=<your-service-api-key>
MAX_FILE_SIZE_MB=10
LOG_LEVEL=INFO
```

### 6.2 Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶ä»£ç 
COPY app/ ./app/

# æš´éœ²ç«¯å£
EXPOSE 8001

# å¯åŠ¨å‘½ä»¤
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8001"]
```

### 6.3 Docker Compose

```yaml
version: '3.8'

services:
  tos-upload-service:
    build: .
    container_name: tos-upload-service
    ports:
      - "8001:8001"
    environment:
      - TOS_REGION=${TOS_REGION}
      - TOS_ENDPOINT=${TOS_ENDPOINT}
      - TOS_BUCKET_NAME=${TOS_BUCKET_NAME}
      - TOS_ACCESS_KEY=${TOS_ACCESS_KEY}
      - TOS_SECRET_KEY=${TOS_SECRET_KEY}
      - TOS_PUBLIC_DOMAIN=${TOS_PUBLIC_DOMAIN}
      - API_KEY=${API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8001/api/v1/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

### 6.4 éƒ¨ç½²æ­¥éª¤

```bash
# 1. å…‹éš†ä»£ç 
git clone <repository-url>
cd tos-upload-service

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å®é™…çš„ AK/SK

# 3. æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# 4. éªŒè¯æœåŠ¡
curl http://localhost:8001/api/v1/health
```

### 6.5 éƒ¨ç½²æ‹“æ‰‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æœåŠ¡å™¨: 101.47.158.162                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Banana AI Service     â”‚    â”‚ TOS Upload Service    â”‚         â”‚
â”‚  â”‚ (å·²éƒ¨ç½²)              â”‚    â”‚ (æ–°å¢)                â”‚         â”‚
â”‚  â”‚ Port: 8000            â”‚    â”‚ Port: 8001            â”‚         â”‚
â”‚  â”‚ /generate             â”‚    â”‚ /api/v1/upload/*      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. å®¢æˆ·ç«¯é›†æˆæŒ‡å—

### 7.1 Android å®¢æˆ·ç«¯é€‚é…

#### 7.1.1 æ–°å¢ Retrofit Service æ¥å£

```java
// TosApiService.java
public interface TosApiService {
    
    @POST("api/v1/upload/base64")
    Call<TosUploadResponse> uploadBase64(
        @Header("X-API-Key") String apiKey,
        @Body TosBase64UploadRequest request
    );
}
```

#### 7.1.2 è¯·æ±‚/å“åº”æ¨¡å‹

```java
// TosBase64UploadRequest.java
public class TosBase64UploadRequest {
    @SerializedName("image_base64")
    private String imageBase64;
    
    @SerializedName("format")
    private String format = "jpeg";
    
    @SerializedName("prefix")
    private String prefix = "generated/";
    
    @SerializedName("quality")
    private int quality = 90;
    
    // getters and setters
}

// TosUploadResponse.java
public class TosUploadResponse {
    private boolean success;
    private int code;
    private String message;
    private TosUploadData data;
    
    // nested data class
    public static class TosUploadData {
        @SerializedName("public_url")
        private String publicUrl;
        
        @SerializedName("object_key")
        private String objectKey;
        
        private String etag;
        
        @SerializedName("upload_time")
        private String uploadTime;
    }
}
```

#### 7.1.3 ä¿®æ”¹ TosUploadService

```java
// TosUploadService.java - æ–°å¢é€šè¿‡æœåŠ¡ä¸Šä¼ çš„æ–¹æ³•
public static void uploadImageViaService(Bitmap bitmap, UploadCallback callback) {
    executor.execute(() -> {
        try {
            // 1. Bitmap è½¬ Base64
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 90, baos);
            byte[] imageBytes = baos.toByteArray();
            String base64Image = Base64.encodeToString(imageBytes, Base64.NO_WRAP);
            
            // 2. æ„å»ºè¯·æ±‚
            TosBase64UploadRequest request = new TosBase64UploadRequest();
            request.setImageBase64(base64Image);
            request.setFormat("jpeg");
            request.setPrefix("generated/");
            
            // 3. è°ƒç”¨æœåŠ¡
            TosApiService service = RetrofitClient.getInstance().createTosService();
            Response<TosUploadResponse> response = service
                .uploadBase64(Constant.TOS_SERVICE_API_KEY, request)
                .execute();
            
            // 4. å¤„ç†å“åº”
            if (response.isSuccessful() && response.body() != null 
                && response.body().isSuccess()) {
                String publicUrl = response.body().getData().getPublicUrl();
                String etag = response.body().getData().getEtag();
                mainHandler.post(() -> callback.onSuccess(publicUrl, etag));
            } else {
                String error = response.body() != null 
                    ? response.body().getMessage() 
                    : "Upload failed";
                mainHandler.post(() -> callback.onFailure(error));
            }
        } catch (Exception e) {
            mainHandler.post(() -> callback.onFailure(e.getMessage()));
        }
    });
}
```

#### 7.1.4 é…ç½®å¸¸é‡

```java
// Constant.java - æ–°å¢
public static final String TOS_SERVICE_BASE_URL = "http://101.47.158.162:8001/";
public static final String TOS_SERVICE_API_KEY = "<your-api-key>";
```

### 7.2 è°ƒç”¨æ–¹å¼å¯¹æ¯”

| å¯¹æ¯”é¡¹ | åŸæ–¹å¼ (ç›´æ¥ SDK) | æ–°æ–¹å¼ (æœåŠ¡è°ƒç”¨) |
|--------|------------------|------------------|
| è°ƒç”¨æ–¹æ³• | `TosUploadService.uploadImage()` | `TosUploadService.uploadImageViaService()` |
| å‡­è¯ä½ç½® | å®¢æˆ·ç«¯ assets | æœåŠ¡ç«¯ç¯å¢ƒå˜é‡ |
| ä¾èµ– | TOS Java SDK | Retrofit HTTP |
| ç½‘ç»œè¯·æ±‚ | 1 æ¬¡ (Appâ†’TOS) | 2 æ¬¡ (Appâ†’æœåŠ¡â†’TOS) |

### 7.3 ç°åº¦åˆ‡æ¢ç­–ç•¥

å»ºè®®é€šè¿‡é…ç½®å¼€å…³å®ç°å¹³æ»‘åˆ‡æ¢ï¼š

```java
// é…ç½®å¼€å…³
public static final boolean USE_TOS_SERVICE = false;  // åˆæœŸ falseï¼ŒéªŒè¯åæ”¹ä¸º true

// ä½¿ç”¨æ—¶
if (Constant.USE_TOS_SERVICE) {
    TosUploadService.uploadImageViaService(bitmap, callback);
} else {
    TosUploadService.uploadImage(bitmap, callback);
}
```

---

## 8. æ€§èƒ½å½±å“åˆ†æ

### 8.1 è€—æ—¶å¯¹æ¯”

| é˜¶æ®µ | åŸæ–¹æ¡ˆ | å®¹å™¨åŒ–æ–¹æ¡ˆ | å·®å¼‚ |
|------|--------|-----------|------|
| å›¾ç‰‡ Base64 ç¼–ç  | ~100ms | ~100ms | æ— å˜åŒ– |
| ç½‘ç»œä¼ è¾“ (å›¾ç‰‡) | ~500-1000ms | ~600-1200ms | +100-200ms |
| TOS ä¸Šä¼  | ~500-1500ms | ~500-1500ms | æ— å˜åŒ– |
| æœåŠ¡å†…éƒ¨å¤„ç† | - | ~50ms | +50ms |
| **æ€»è®¡** | **1.1-2.6s** | **1.25-2.85s** | **+150-250ms** |

### 8.2 å¯¹æ¯”å…¨é“¾è·¯

```
å®Œæ•´ç”¨æˆ·æ“ä½œæµç¨‹è€—æ—¶åˆ†æ:

1. æ‹ç…§/é€‰å›¾        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ~1s
2. å›¾ç‰‡å‹ç¼©/ç¼–ç     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ~0.5s
3. AI ç”Ÿæˆ â˜…â˜…â˜…â˜…â˜…   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ~50-60s (ä¸»è¦ç“¶é¢ˆ)
4. ç»“æœå±•ç¤º        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ~0.5s
5. ç‚¹å‡»åˆ†äº«        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
6. TOS ä¸Šä¼         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ~1.5-2.5s â†’ ~1.75-2.75s
7. äºŒç»´ç ç”Ÿæˆ      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  ~0.1s

ç»“è®º: TOS ä¸Šä¼ å®¹å™¨åŒ–å¢åŠ çš„ ~200ms å»¶è¿Ÿï¼Œå å…¨é“¾è·¯ (~60s) çš„ 0.3%ï¼Œ
     ç”¨æˆ·å‡ ä¹æ— æ„ŸçŸ¥ã€‚
```

### 8.3 ä¼˜åŒ–å»ºè®®

1. **å¯ç”¨ HTTP Keep-Alive**: å¤ç”¨ TCP è¿æ¥å‡å°‘æ¡æ‰‹å¼€é”€
2. **æœåŠ¡ç«¯å›¾ç‰‡å‹ç¼©**: å¯é€‰æ‹©åœ¨æœåŠ¡ç«¯å¯¹å›¾ç‰‡è¿›è¡ŒäºŒæ¬¡å‹ç¼©
3. **å°±è¿‘éƒ¨ç½²**: TOS æœåŠ¡éƒ¨ç½²åœ¨ä¸å®¢æˆ·ç«¯ç›¸åŒåŒºåŸŸ

---

## 9. å®‰å…¨æ€§è€ƒè™‘

### 9.1 å‡­è¯å®‰å…¨

| å¯¹æ¯”é¡¹ | åŸæ–¹æ¡ˆ | å®¹å™¨åŒ–æ–¹æ¡ˆ |
|--------|--------|-----------|
| AK/SK å­˜å‚¨ | å®¢æˆ·ç«¯ assets | æœåŠ¡ç«¯ç¯å¢ƒå˜é‡ |
| æ³„éœ²é£é™© | ğŸ”´ APK åç¼–è¯‘å¯è·å– | ğŸŸ¢ ä»…æœåŠ¡ç«¯å¯è®¿é—® |
| è½®æ¢éš¾åº¦ | éœ€å‘å¸ƒæ–°ç‰ˆ APK | é‡å¯å®¹å™¨å³å¯ |

### 9.2 æ¥å£å®‰å…¨

1. **API Key è®¤è¯**: æ‰€æœ‰ä¸Šä¼ æ¥å£éœ€æºå¸¦ X-API-Key
2. **è¯·æ±‚é™æµ**: é˜²æ­¢æ¶æ„åˆ·æ¥å£ (å»ºè®® 100 req/min/IP)
3. **æ–‡ä»¶æ ¡éªŒ**: 
   - æ–‡ä»¶ç±»å‹ç™½åå• (JPEG/PNG/WEBP)
   - æ–‡ä»¶å¤§å°é™åˆ¶ (10MB)
   - Magic Number æ ¡éªŒ

### 9.3 ä¼ è¾“å®‰å…¨

1. **HTTPS**: ç”Ÿäº§ç¯å¢ƒå¯ç”¨ HTTPS
2. **å†…ç½‘éš”ç¦»**: æœåŠ¡éƒ¨ç½²åœ¨å†…ç½‘ï¼Œé€šè¿‡ Nginx åå‘ä»£ç†æš´éœ²

---

## 10. é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | æ¦‚ç‡ | åº”å¯¹æªæ–½ |
|------|------|------|----------|
| æœåŠ¡ä¸å¯ç”¨ | åˆ†äº«åŠŸèƒ½å¤±æ•ˆ | ä¸­ | ä¿ç•™åŸ SDK ä¸Šä¼ ä½œä¸ºé™çº§æ–¹æ¡ˆ |
| ç½‘ç»œå»¶è¿Ÿå¢åŠ  | ç”¨æˆ·ä½“éªŒä¸‹é™ | ä½ | å°±è¿‘éƒ¨ç½²ã€CDN åŠ é€Ÿ |
| TOS å‡­è¯æ³„éœ² | å­˜å‚¨æ¡¶è¢«æ»¥ç”¨ | ä½ | å®šæœŸè½®æ¢ AK/SKã€ç›‘æ§å‘Šè­¦ |
| æœåŠ¡è¢«æ¶æ„è°ƒç”¨ | èµ„æºæ¶ˆè€— | ä¸­ | API Key + é™æµ + IP ç™½åå• |

---

## é™„å½•

### A. ä¾èµ–æ¸…å•

```txt
# requirements.txt
fastapi==0.109.0
uvicorn[standard]==0.27.0
python-multipart==0.0.6
tos==2.6.0
pydantic==2.5.3
pydantic-settings==2.1.0
python-dotenv==1.0.0
```

### B. å‚è€ƒé“¾æ¥

- [ç«å±±å¼•æ“ TOS Python SDK æ–‡æ¡£](https://www.volcengine.com/docs/6349/183892)
- [FastAPI å®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Docker Compose æ–‡æ¡£](https://docs.docker.com/compose/)

---

> **æ–‡æ¡£çŠ¶æ€**: è‰æ¡ˆ  
> **ä¸‹ä¸€æ­¥**: å¾…æŠ€æœ¯è¯„å®¡åè¿›å…¥å¼€å‘é˜¶æ®µ
